<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Notificações - Pilar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<style>
    body { background-color: #f8f9fa; padding-bottom: 100px; }
    .container-main { max-width: 900px; margin: 30px auto; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }

    /* CABEÇALHO VERDE */
    .header-pilar {
        background-color: #76b366; 
        color: white;
        padding: 25px;
        border-radius: 12px;
        margin-bottom: 30px;
        display: flex;
        align-items: center;
        gap: 25px;
    }
    .header-pilar .bg-logo {
        background: white; padding: 10px; border-radius: 8px; display: flex; align-items: center;
    }
    .header-pilar img { max-height: 45px; }
    .header-pilar h2 { margin: 0; font-weight: 700; font-size: 1.6rem; }
    .header-pilar p { margin: 0; opacity: 0.9; font-size: 0.9rem; }

    /* BOTÕES EMPRESA */
    .btn-empresa { border: 2px solid #dee2e6; border-radius: 10px; padding: 12px; background: white; transition: 0.2s; display: flex; align-items: center; justify-content: center; gap: 10px; font-weight: 600; color: #444; }
    .btn-empresa.active { border-color: #76b366; background-color: #f0f9ee; color: #2d5a27; }
    .btn-empresa img { height: 25px; }

    /* ABAS DE ENTRADA */
    .nav-tabs-custom { border: none; justify-content: center; margin-bottom: 20px; display: flex; gap: 20px; }
    .nav-link-custom { border: none; background: none; color: #007bff; cursor: pointer; font-weight: 600; text-decoration: none; padding: 5px 10px; }
    .nav-link-custom.active { background-color: #76b366; color: white; border-radius: 5px; }

    /* TABELA TELA */
    .table-input input { border: 1px solid #ddd; padding: 4px 8px; width: 100%; border-radius: 4px; }
    .btn-remove { color: #dc3545; border: none; background: none; font-size: 1.2rem; font-weight: bold; }

    /* TEMPLATE PDF (OCULTO) */
    #template-wrapper { position: fixed; top: 0; left: 0; z-index: -1000; opacity: 0; pointer-events: none; }
    .documento-a4 { width: 210mm; padding: 20mm; background: white; font-family: 'Times New Roman', serif; font-size: 12pt; }
    .header-logos { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; }
    .logo-img { max-height: 80px; max-width: 180px; object-fit: contain; }
</style>
</head>
<body>

<div class="container container-main">
    <div class="header-pilar">
        <div class="bg-logo">
            <img src="assets/pilar-logo.png" alt="Pilar" onerror="this.src='https://via.placeholder.com/120x40?text=PILAR'">
        </div>
        <div>
            <h2>GERADOR DE NOTIFICAÇÕES</h2>
            <p>Sistema interno para emissão de documentos extrajudiciais.</p>
        </div>
    </div>

    <h6 class="text-center text-secondary mb-3 text-uppercase fw-bold">1. Selecione a Empresa Notificante</h6>
    <div class="row mb-4 g-2">
        <div class="col-md-4">
            <button class="btn btn-empresa w-100" data-empresa="nadia" onclick="selecionarEmpresa('nadia')">
                <img src="assets/nadia/logo-esq.png" onerror="this.style.display='none'"> Nadia Rural
            </button>
        </div>
        <div class="col-md-4">
            <button class="btn btn-empresa w-100" data-empresa="inter" onclick="selecionarEmpresa('inter')">
                <img src="assets/inter/logo-esq.png" onerror="this.style.display='none'"> Inter
            </button>
        </div>
        <div class="col-md-4">
            <button class="btn btn-empresa w-100" data-empresa="agrominas" onclick="selecionarEmpresa('agrominas')">
                <img src="assets/agrominas/logo-esq.png" onerror="this.style.display='none'"> Agrominas
            </button>
        </div>
    </div>

    <div id="alerta-selecao" class="alert alert-warning text-center">Aguardando seleção de empresa...</div>

    <div id="area-dados" style="display:none;">
        <h6 class="text-center text-secondary mb-3 text-uppercase fw-bold">2. Insira os Dados dos Notificados</h6>
        
        <div class="nav-tabs-custom">
            <button class="nav-link-custom active" id="tab-excel" onclick="alternarModo('excel')">Colar do Excel</button>
            <button class="nav-link-custom" id="tab-tela" onclick="alternarModo('tela')">Preencher na Tela</button>
        </div>

        <div id="modo-excel">
            <textarea class="form-control mb-4" id="inputDataExcel" rows="6" placeholder="Nome	CPF	Valor"></textarea>
        </div>

        <div id="modo-tela" style="display: none;">
            <table class="table table-bordered align-middle">
                <thead class="table-light small">
                    <tr>
                        <th>Nome do Cliente</th>
                        <th>CPF ou CNPJ</th>
                        <th>Valor (R$)</th>
                        <th width="40"></th>
                    </tr>
                </thead>
                <tbody id="tabela-corpo">
                    <tr>
                        <td><input type="text" class="input-nome"></td>
                        <td><input type="text" class="input-cnpj"></td>
                        <td><input type="text" class="input-valor"></td>
                        <td><button class="btn-remove" onclick="removerLinha(this)">×</button></td>
                    </tr>
                </tbody>
            </table>
            <button class="btn btn-success btn-sm mb-4" onclick="adicionarLinha()">+ Adicionar Linha</button>
        </div>

        <div class="d-grid">
            <button class="btn btn-primary btn-lg fw-bold" onclick="iniciarGeracao()" id="btnGerar" style="background-color: #3b71ed;">
                Gerar PDFs e Baixar ZIP
            </button>
        </div>
        <div id="status" class="mt-3 text-center fw-bold"></div>
    </div>
</div>

<div id="template-wrapper">
    <div id="documento-modelo" class="documento-a4">
        <div class="header-logos">
            <img src="" id="logo-print-esq" class="logo-img">
            <img src="" id="logo-print-dir" class="logo-img">
        </div>
        <div id="template-texto"></div>
        <p style="text-align: right; margin-top: 40px;" id="print-data"></p>
        <div class="assinatura" style="text-align: right; margin-top: 50px;">
            <img src="" id="assinatura-img" style="height: 60px; margin-bottom: 5px; display: block; margin-left: auto;">
            <strong id="assinatura-nome-advogado"></strong><br>
            <span id="assinatura-oab"></span>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
